---
import { Image } from "astro:assets";
import Arrow from "@assets/arrow.svg";
import { getRecentProjects, getProjectImage } from "@data/projects";
const proyectos = getRecentProjects();
---

<section id="projects" title="projects">
	<Arrow style="transform: rotate(180deg);" />
	<h2>Proyectos Recientes</h2>
	<div class="projects-container">
		{
			proyectos.map((p) => {
				return (
					<div class="project">
						<Image
							src={getProjectImage(p.image)}
							width={800}
							height={450}
							widths={[400, 600, 800, 1200]}
							sizes="(max-width: 768px) 400px, (max-width: 1024px) 600px, 800px"
							alt={"Imagen proyecto " + p.title}
							loading="lazy"
							format="webp"
						/>
						<h3>{p.title}</h3>
						<p>{p.description}</p>
						{(p.links.github || p.links.website) && (
							<div class="project-links">
								{p.links.github && (
									<a href={p.links.github} target="_blank" rel="noopener noreferrer">
										GitHub
									</a>
								)}
								{p.links.website && (
									<a href={p.links.website} target="_blank" rel="noopener noreferrer">
										Website
									</a>
								)}
							</div>
						)}
					</div>
				);
			})
		}
	</div>
	<Arrow />
</section>

<style>
	.projects-container {
		display: grid;
		grid-template-columns: 1fr;
		gap: 2rem;
		margin-top: 2rem;
	}
	.project-links {
		display: flex;
		flex-direction: row;
		align-items: center;
		justify-content: center;
		gap: 1rem;
	}
	a {
		background-color: rgba(0, 0, 0, 0.05);
		border-radius: 5%;
		text-decoration: none;
		font-weight: 500;
	}

	@media (min-width: 768px) {
		.projects-container {
			grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
		}
	}

	.project {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		height: 100%;
	}

	.project img {
		width: 100%;
		height: 250px;
		object-fit: fill;
		border-radius: 8px;
	}

	.project h3 {
		margin: 0;
		font-size: 1.5rem;
	}

	.project p {
		margin: 0;
		color: #666;
		flex-grow: 1;
	}
</style>
